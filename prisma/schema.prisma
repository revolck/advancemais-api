generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

// =============================================
// MODELS
// =============================================

model Usuarios {
  id           String      @id @default(uuid())
  nomeCompleto String
  supabaseId   String      @unique
  cpf          String?     @unique
  cnpj         String?     @unique
  email        String      @unique
  senha        String
  codUsuario   String      @unique
  tipoUsuario  TiposDeUsuarios
  role         Roles
  status       Status      @default(ATIVO)
  criadoEm     DateTime    @default(now())
  atualizadoEm DateTime    @updatedAt
  ultimoLogin  DateTime?
  refreshToken String?
  sessoes      UsuariosSessoes[]

  // RELACIONAMENTOS EXISTENTES
  enderecos            UsuariosEnderecos[]
  vagasCriadas         EmpresasVagas[]    @relation("UsuarioVagas")
  processosCandidatados EmpresasVagasProcesso[] @relation("UsuariosProcessos")
  curriculos            UsuariosCurriculos[]
  candidaturasFeitas    EmpresasCandidatos[]   @relation("CandidatoUsuario")
  candidaturasRecebidas EmpresasCandidatos[]   @relation("EmpresaUsuario")
  planosContratados    EmpresasPlano[]    @relation("UsuarioPlanos")
  banimentosRecebidos  UsuariosEmBanimentos[] @relation("UsuariosEmBanimentosUsuario")
  banimentosAplicados  UsuariosEmBanimentos[] @relation("UsuariosEmBanimentosAdmin")
  banimentosLogsCriados UsuariosEmBanimentosLogs[] @relation("UsuariosEmBanimentosLogsAdmin")
  redesSociais         UsuariosRedesSociais?
  recuperacaoSenha     UsuariosRecuperacaoSenha?
  emailVerification    UsuariosVerificacaoEmail?
  informacoes          UsuariosInformation?
  cursosComoInstrutor  Cursos[]             @relation("CursosInstrutor")
  turmasMatriculadas   CursosTurmasMatriculas[]
  certificadosEmitidos CursosCertificadosEmitidos[] @relation("CursosCertificadosEmitidosEmitidoPor")
  estagiosComoAluno   CursosEstagios[]            @relation("CursosEstagiosAluno")
  estagiosCriados     CursosEstagios[]            @relation("CursosEstagiosCriadoPor")
  estagiosAtualizados CursosEstagios[]            @relation("CursosEstagiosAtualizadoPor")

  @@index([status])
  @@index([role])
  @@index([tipoUsuario])
  @@index([criadoEm])
  @@index([role, status, criadoEm], map: "usuarios_role_status_criadoem_idx")
  @@index([tipoUsuario, role, status, criadoEm], map: "usuarios_tipo_role_status_criadoem_idx")
}

model UsuariosInformation {
  usuarioId     String   @id
  telefone      String
  genero        String?
  dataNasc      DateTime?
  matricula     String?
  avatarUrl     String?
  descricao     String?  @db.VarChar(500)
  aceitarTermos Boolean  @default(false)

  usuario Usuarios @relation(fields: [usuarioId], references: [id], onDelete: Cascade)
}

model CandidatosAreasInteresse {
  id        Int                             @id @default(autoincrement())
  categoria String                          @db.VarChar(120)
  subareas  CandidatosSubareasInteresse[]
  vagas     EmpresasVagas[]                @relation("EmpresasVagasAreaInteresse")
  criadoEm  DateTime                       @default(now())
  atualizadoEm DateTime                     @updatedAt

  @@index([categoria])
}

model CandidatosSubareasInteresse {
  id        Int                        @id @default(autoincrement())
  areaId    Int
  nome      String                     @db.VarChar(120)
  vagas     EmpresasVagas[]            @relation("EmpresasVagasSubareaInteresse")
  criadoEm  DateTime                   @default(now())
  atualizadoEm DateTime                @updatedAt

  area CandidatosAreasInteresse @relation(fields: [areaId], references: [id], onDelete: Cascade)
  @@unique([areaId, nome])
  @@index([nome])
}

model CursosCategorias {
  id        Int                @id @default(autoincrement())
  nome      String             @db.VarChar(120)
  descricao String?            @db.VarChar(255)
  subcats   CursosSubcategorias[]
  cursos    Cursos[]

  @@unique([nome])
  @@index([nome])
}

model CursosSubcategorias {
  id           Int             @id @default(autoincrement())
  nome         String          @db.VarChar(120)
  descricao    String?         @db.VarChar(255)
  categoriaId  Int
  categoria    CursosCategorias  @relation(fields: [categoriaId], references: [id], onDelete: Cascade)
  cursos       Cursos[]

  @@unique([categoriaId, nome])
  @@index([nome])
}

model Cursos {
  id              Int                 @id @default(autoincrement())
  codigo          String              @unique @db.VarChar(12)
  nome            String              @db.VarChar(255)
  descricao       String?             @db.Text
  cargaHoraria    Int
  instrutorId     String?
  statusPadrao    CursosStatusPadrao  @default(RASCUNHO)
  categoriaId     Int?
  subcategoriaId  Int?
  estagioObrigatorio Boolean           @default(false)
  criadoEm        DateTime            @default(now())
  atualizadoEm    DateTime            @updatedAt
  instrutor       Usuarios?           @relation("CursosInstrutor", fields: [instrutorId], references: [id], onDelete: SetNull)
  categoria       CursosCategorias?   @relation(fields: [categoriaId], references: [id], onDelete: SetNull)
  subcategoria    CursosSubcategorias? @relation(fields: [subcategoriaId], references: [id], onDelete: SetNull)
  turmas          CursosTurmas[]
  estagios        CursosEstagios[]

  @@index([categoriaId])
  @@index([subcategoriaId])
  @@index([instrutorId])
}

model CursosTurmas {
  id                   String                   @id @default(uuid())
  codigo               String                   @unique @db.VarChar(12)
  cursoId              Int
  nome                 String                   @db.VarChar(255)
  turno                CursosTurnos             @default(INTEGRAL)
  metodo               CursosMetodos            @default(ONLINE)
  dataInicio           DateTime?
  dataFim              DateTime?
  dataInscricaoInicio  DateTime?
  dataInscricaoFim     DateTime?
  vagasTotais          Int
  vagasDisponiveis     Int
  status               CursoStatus              @default(RASCUNHO)
  criadoEm             DateTime                 @default(now())
  atualizadoEm         DateTime                 @updatedAt
  curso                Cursos                   @relation(fields: [cursoId], references: [id], onDelete: Cascade)
  matriculas           CursosTurmasMatriculas[]
  aulas                CursosTurmasAulas[]
  modulos              CursosTurmasModulos[]
  provas               CursosTurmasProvas[]
  agenda               CursosTurmasAgenda[]
  notas                CursosNotas[]
  frequencias          CursosFrequenciaAlunos[]
  regrasAvaliacao      CursosTurmasRegrasAvaliacao?
  recuperacoes         CursosTurmasRecuperacoes[]
  estagios             CursosEstagios[]

  @@index([cursoId])
  @@index([status])
}

model CursosTurmasModulos {
  id          String   @id @default(uuid())
  turmaId     String
  nome        String   @db.VarChar(255)
  descricao   String?  @db.Text
  obrigatorio Boolean  @default(true)
  ordem       Int      @default(0)
  criadoEm    DateTime @default(now())
  atualizadoEm DateTime @updatedAt

  turma   CursosTurmas       @relation(fields: [turmaId], references: [id], onDelete: Cascade)
  aulas   CursosTurmasAulas[]
  provas  CursosTurmasProvas[]

  @@index([turmaId])
  @@index([turmaId, ordem])
}

model CursosTurmasAulas {
  id          String   @id @default(uuid())
  turmaId     String
  moduloId    String?
  nome        String   @db.VarChar(255)
  descricao   String?  @db.Text
  ordem       Int      @default(0)
  urlVideo    String?  @db.VarChar(2048)
  sala        String?  @db.VarChar(100)
  urlMeet     String?  @db.VarChar(2048)
  criadoEm    DateTime @default(now())
  atualizadoEm DateTime @updatedAt

  turma     CursosTurmas               @relation(fields: [turmaId], references: [id], onDelete: Cascade)
  modulo    CursosTurmasModulos?       @relation(fields: [moduloId], references: [id], onDelete: SetNull)
  materiais CursosTurmasAulasMateriais[]
  frequencias CursosFrequenciaAlunos[]
  agenda     CursosTurmasAgenda[]

  @@index([turmaId])
  @@index([moduloId])
  @@index([turmaId, ordem])
}

model CursosTurmasAulasMateriais {
  id                String            @id @default(uuid())
  aulaId            String
  titulo            String            @db.VarChar(255)
  descricao         String?           @db.VarChar(2000)
  tipo              CursosMateriais
  tipoArquivo       TiposDeArquivos?
  url               String?           @db.VarChar(2048)
  duracaoEmSegundos Int?
  tamanhoEmBytes    Int?
  ordem             Int               @default(0)
  criadoEm          DateTime          @default(now())
  atualizadoEm      DateTime          @updatedAt

  aula CursosTurmasAulas @relation(fields: [aulaId], references: [id], onDelete: Cascade)

  @@index([aulaId])
  @@index([tipo])
}

model CursosTurmasMatriculas {
  id        String   @id @default(uuid())
  turmaId   String
  alunoId   String
  criadoEm  DateTime @default(now())

  turma CursosTurmas @relation(fields: [turmaId], references: [id], onDelete: Cascade)
  aluno Usuarios     @relation(fields: [alunoId], references: [id], onDelete: Cascade)
  envios CursosTurmasProvasEnvios[]
  recuperacoes CursosTurmasRecuperacoes[]
  notas CursosNotas[]
  frequencias CursosFrequenciaAlunos[]
  certificados CursosCertificadosEmitidos[]
  estagios CursosEstagios[]

  @@unique([turmaId, alunoId])
  @@index([alunoId])
}

model CursosTurmasProvas {
  id           String             @id @default(uuid())
  turmaId      String
  moduloId     String?
  titulo       String             @db.VarChar(255)
  etiqueta     String             @db.VarChar(30)
  descricao    String?            @db.Text
  peso         Decimal            @db.Decimal(5, 2)
  ativo        Boolean            @default(true)
  localizacao  CursosLocalProva   @default(TURMA)
  ordem        Int                @default(0)
  criadoEm     DateTime           @default(now())
  atualizadoEm DateTime           @updatedAt

  turma      CursosTurmas         @relation(fields: [turmaId], references: [id], onDelete: Cascade)
  modulo     CursosTurmasModulos? @relation(fields: [moduloId], references: [id], onDelete: SetNull)
  envios     CursosTurmasProvasEnvios[]
  recuperacoes CursosTurmasRecuperacoes[]
  notas      CursosNotas[]
  agenda     CursosTurmasAgenda[]

  @@unique([turmaId, etiqueta])
  @@index([turmaId])
  @@index([moduloId])
  @@index([turmaId, ativo])
}

model CursosTurmasAgenda {
  id          String           @id @default(uuid())
  turmaId     String
  tipo        CursosAgendaTipo
  titulo      String           @db.VarChar(255)
  descricao   String?          @db.VarChar(1000)
  inicio      DateTime
  fim         DateTime?
  aulaId      String?
  provaId     String?
  criadoEm    DateTime         @default(now())
  atualizadoEm DateTime        @updatedAt

  turma CursosTurmas         @relation(fields: [turmaId], references: [id], onDelete: Cascade)
  aula  CursosTurmasAulas?   @relation(fields: [aulaId], references: [id], onDelete: SetNull)
  prova CursosTurmasProvas?  @relation(fields: [provaId], references: [id], onDelete: SetNull)

  @@index([turmaId, inicio])
  @@index([tipo])
  @@index([aulaId])
  @@index([provaId])
}

model CursosTurmasProvasEnvios {
  id          String   @id @default(uuid())
  provaId     String
  matriculaId String
  nota        Decimal? @db.Decimal(4, 1)
  pesoTotal   Decimal? @db.Decimal(5, 2)
  realizadoEm DateTime?
  observacoes String?  @db.Text
  criadoEm    DateTime @default(now())
  atualizadoEm DateTime @updatedAt

  prova      CursosTurmasProvas     @relation(fields: [provaId], references: [id], onDelete: Cascade)
  matricula  CursosTurmasMatriculas @relation(fields: [matriculaId], references: [id], onDelete: Cascade)
  recuperacoes CursosTurmasRecuperacoes[]

  @@unique([provaId, matriculaId])
  @@index([matriculaId])
}

model CursosTurmasRegrasAvaliacao {
  id                         String                       @id @default(uuid())
  turmaId                    String                       @unique
  mediaMinima                Decimal                      @db.Decimal(4, 1)
  politicaRecuperacaoAtiva   Boolean                      @default(false)
  modelosRecuperacao         CursosModelosRecuperacao[]   @default([])
  ordemAplicacaoRecuperacao  CursosModelosRecuperacao[]   @default([])
  notaMaximaRecuperacao      Decimal?                     @db.Decimal(4, 1)
  pesoProvaFinal             Decimal?                     @db.Decimal(5, 2)
  observacoes                String?                      @db.VarChar(500)
  criadoEm                   DateTime                     @default(now())
  atualizadoEm               DateTime                     @updatedAt

  turma        CursosTurmas              @relation(fields: [turmaId], references: [id], onDelete: Cascade)
  recuperacoes CursosTurmasRecuperacoes[]
}

model CursosTurmasRecuperacoes {
  id              String                 @id @default(uuid())
  turmaId         String
  matriculaId     String
  regraId         String?
  provaId         String?
  envioId         String?
  notaRecuperacao Decimal?               @db.Decimal(4, 1)
  notaFinal       Decimal?               @db.Decimal(4, 1)
  mediaCalculada  Decimal?               @db.Decimal(4, 2)
  modeloAplicado  CursosModelosRecuperacao?
  statusFinal     CursosSituacaoFinal    @default(EM_ANALISE)
  detalhes        Json?
  observacoes     String?                @db.VarChar(500)
  aplicadoEm      DateTime?              @default(now())
  criadoEm        DateTime               @default(now())
  atualizadoEm    DateTime               @updatedAt

  turma     CursosTurmas               @relation(fields: [turmaId], references: [id], onDelete: Cascade)
  matricula CursosTurmasMatriculas     @relation(fields: [matriculaId], references: [id], onDelete: Cascade)
  regra     CursosTurmasRegrasAvaliacao? @relation(fields: [regraId], references: [id], onDelete: SetNull)
  prova     CursosTurmasProvas?        @relation(fields: [provaId], references: [id], onDelete: SetNull)
  envio     CursosTurmasProvasEnvios?  @relation(fields: [envioId], references: [id], onDelete: SetNull)

  @@index([turmaId])
  @@index([matriculaId])
  @@index([statusFinal])
}

model CursosNotas {
  id                String          @id @default(uuid())
  turmaId           String
  matriculaId       String
  tipo              CursosNotasTipo
  provaId           String?
  referenciaExterna String?         @db.VarChar(120)
  titulo            String          @db.VarChar(255)
  descricao         String?         @db.VarChar(1000)
  nota              Decimal?        @db.Decimal(4, 1)
  peso              Decimal?        @db.Decimal(5, 2)
  valorMaximo       Decimal?        @db.Decimal(4, 1)
  dataReferencia    DateTime?
  observacoes       String?         @db.VarChar(500)
  criadoEm          DateTime        @default(now())
  atualizadoEm      DateTime        @updatedAt

  turma      CursosTurmas           @relation(fields: [turmaId], references: [id], onDelete: Cascade)
  matricula  CursosTurmasMatriculas @relation(fields: [matriculaId], references: [id], onDelete: Cascade)
  prova      CursosTurmasProvas?    @relation(fields: [provaId], references: [id], onDelete: SetNull)

  @@index([turmaId])
  @@index([matriculaId])
  @@index([tipo])
  @@unique([matriculaId, provaId])
}

model CursosFrequenciaAlunos {
  id             String                  @id @default(uuid())
  turmaId        String
  matriculaId    String
  aulaId         String?
  dataReferencia DateTime                @default(now())
  status         CursosFrequenciaStatus  @default(PRESENTE)
  justificativa  String?                 @db.VarChar(500)
  observacoes    String?                 @db.VarChar(500)
  criadoEm       DateTime                @default(now())
  atualizadoEm   DateTime                @updatedAt

  turma      CursosTurmas           @relation(fields: [turmaId], references: [id], onDelete: Cascade)
  matricula  CursosTurmasMatriculas @relation(fields: [matriculaId], references: [id], onDelete: Cascade)
  aula       CursosTurmasAulas?     @relation(fields: [aulaId], references: [id], onDelete: SetNull)

  @@index([turmaId])
  @@index([matriculaId])
  @@index([aulaId])
  @@index([dataReferencia])
  @@unique([turmaId, matriculaId, aulaId, dataReferencia], map: "cursos_frequencia_unico")
}

enum CursosSituacaoFinal {
  EM_ANALISE
  APROVADO
  REPROVADO
}

enum CursosModelosRecuperacao {
  SUBSTITUI_MENOR
  MEDIA_MINIMA_DIRETA
  PROVA_FINAL_UNICA
  NOTA_MAXIMA_LIMITADA
}

enum CursosNotasTipo {
  PROVA
  TRABALHO
  ATIVIDADE
  PROJETO
  SEMINARIO
  PARTICIPACAO
  SIMULADO
  BONUS
  OUTRO
}

enum CursosFrequenciaStatus {
  PRESENTE
  AUSENTE
  JUSTIFICADO
  ATRASADO
}

enum CursosLocalProva {
  TURMA
  MODULO
}

enum CursosAgendaTipo {
  AULA
  PROVA
  EVENTO
  ATIVIDADE
  TRABALHO
  PROJETO
  SEMINARIO
  SIMULADO
  REUNIAO
  RECESSO
  FERIADO
}

enum CursosStatusPadrao {
  PUBLICADO
  RASCUNHO
  DESPUBLICADO
}

enum CursosMateriais {
  APOSTILA
  SLIDE
  VIDEOAULA
  AUDIOAULA
  ARTIGO
  EXERCICIO
  SIMULADO
  LIVRO
  CERTIFICADO
  OUTRO
}

enum TiposDeArquivos {
  pdf
  docx
  xlsx
  pptx
  imagem
  video
  audio
  zip
  link
  outro
}

model UsuariosVerificacaoEmail {
  usuarioId                  String   @id
  emailVerificado            Boolean  @default(false)
  emailVerificadoEm          DateTime?
  emailVerificationToken     String?  @unique
  emailVerificationTokenExp  DateTime?
  emailVerificationAttempts  Int      @default(0)
  ultimaTentativaVerificacao DateTime?

  usuario Usuarios @relation(fields: [usuarioId], references: [id], onDelete: Cascade)

  @@index([emailVerificationToken])
  @@index([emailVerificationTokenExp])
}

model UsuariosRecuperacaoSenha {
  id                          String   @id @default(uuid())
  usuarioId                   String   @unique
  tokenRecuperacao            String?
  tokenRecuperacaoExp         DateTime?
  tentativasRecuperacao       Int      @default(0)
  ultimaTentativaRecuperacao  DateTime?
  criadoEm                    DateTime @default(now())
  atualizadoEm                DateTime @updatedAt

  usuario Usuarios @relation(fields: [usuarioId], references: [id], onDelete: Cascade)

  @@index([tokenRecuperacao])
}

model UsuariosSessoes {
  id          String   @id @default(uuid())
  usuarioId   String
  refreshToken String   @unique
  rememberMe  Boolean  @default(false)
  ip          String?  @db.VarChar(45)
  userAgent   String?  @db.VarChar(512)
  criadoEm    DateTime @default(now())
  atualizadoEm DateTime @updatedAt
  expiraEm    DateTime
  revogadoEm  DateTime?

  usuario Usuarios @relation(fields: [usuarioId], references: [id], onDelete: Cascade)

  @@index([usuarioId, rememberMe])
  @@index([expiraEm])
}

model EmpresasVagas {
  id               String         @id @default(uuid())
  codigo           String         @unique @db.VarChar(6)
  slug             String         @unique @db.VarChar(120)
  usuarioId        String
  areaInteresseId  Int?
  subareaInteresseId Int?
  modoAnonimo      Boolean        @default(false)
  regimeDeTrabalho RegimesDeTrabalhos
  modalidade       ModalidadesDeVagas
  titulo           String         @db.VarChar(255)
  paraPcd          Boolean        @default(false)
  numeroVagas      Int            @default(1)
  descricao        String?        @db.Text
  requisitos       Json
  atividades       Json
  beneficios       Json
  observacoes      String?        @db.Text
  jornada          Jornadas       @default(INTEGRAL)
  senioridade      Senioridade    @default(ABERTO)
  inscricoesAte    DateTime?
  inseridaEm       DateTime       @default(now())
  atualizadoEm     DateTime       @updatedAt
  status           StatusDeVagas @default(RASCUNHO)
  localizacao      Json?
  salarioMin       Decimal?       @db.Decimal(12, 2)
  salarioMax       Decimal?       @db.Decimal(12, 2)
  salarioConfidencial Boolean     @default(true)
  maxCandidaturasPorUsuario Int?
  destaque         Boolean        @default(false)

  empresa Usuarios @relation("UsuarioVagas", fields: [usuarioId], references: [id], onDelete: Cascade)
  destaqueInfo EmpresasVagasDestaque?
  areaInteresse   CandidatosAreasInteresse?    @relation("EmpresasVagasAreaInteresse", fields: [areaInteresseId], references: [id], onDelete: SetNull)
  subareaInteresse CandidatosSubareasInteresse? @relation("EmpresasVagasSubareaInteresse", fields: [subareaInteresseId], references: [id], onDelete: SetNull)
  processos        EmpresasVagasProcesso[]
  candidaturas     EmpresasCandidatos[]

  @@index([usuarioId])
  @@index([areaInteresseId])
  @@index([subareaInteresseId])
  @@index([status, inseridaEm])
}

model EmpresasVagasProcesso {
  id           String         @id @default(uuid())
  vagaId       String
  candidatoId  String
  status       StatusProcesso @default(RECEBIDA)
  origem       OrigemVagas    @default(SITE)
  observacoes  String?        @db.VarChar(1000)
  agendadoEm   DateTime?
  criadoEm     DateTime       @default(now())
  atualizadoEm DateTime       @updatedAt

  vaga      EmpresasVagas @relation(fields: [vagaId], references: [id], onDelete: Cascade)
  candidato Usuarios      @relation("UsuariosProcessos", fields: [candidatoId], references: [id], onDelete: Cascade)

  @@unique([vagaId, candidatoId])
  @@index([vagaId])
  @@index([candidatoId])
  @@index([status])
  @@index([origem])
}

model EmpresasVagasDestaque {
  id               String     @id @default(uuid())
  vagaId           String     @unique
  empresasPlanoId  String
  ativo            Boolean    @default(true)
  ativadoEm        DateTime   @default(now())
  desativadoEm     DateTime?
  criadoEm         DateTime   @default(now())
  atualizadoEm     DateTime   @updatedAt

  vaga  EmpresasVagas @relation(fields: [vagaId], references: [id], onDelete: Cascade)
  plano EmpresasPlano @relation(fields: [empresasPlanoId], references: [id], onDelete: Cascade)

  @@index([empresasPlanoId, ativo])
}

model UsuariosCurriculos {
  id                  String   @id @default(uuid())
  usuarioId           String
  titulo              String?  @db.VarChar(255)
  resumo              String?  @db.Text
  objetivo            String?  @db.VarChar(1000)
  principal           Boolean  @default(false)
  areasInteresse      Json?
  preferencias        Json?
  habilidades         Json?
  idiomas             Json?
  experiencias        Json?
  formacao            Json?
  cursosCertificacoes Json?
  premiosPublicacoes  Json?
  acessibilidade      Json?
  consentimentos      Json?
  ultimaAtualizacao   DateTime @default(now())
  criadoEm            DateTime @default(now())
  atualizadoEm        DateTime @updatedAt

  usuario      Usuarios           @relation(fields: [usuarioId], references: [id], onDelete: Cascade)
  candidaturas EmpresasCandidatos[]

  @@index([usuarioId, criadoEm])
}

model EmpresasCandidatos {
  id               String         @id @default(uuid())
  vagaId           String
  candidatoId      String
  curriculoId      String
  empresaUsuarioId String
  status           StatusProcesso @default(RECEBIDA)
  origem           OrigemVagas    @default(SITE)
  aplicadaEm       DateTime       @default(now())
  atualizadaEm     DateTime       @updatedAt
  consentimentos   Json?

  vaga       EmpresasVagas      @relation(fields: [vagaId], references: [id], onDelete: Cascade)
  candidato  Usuarios           @relation("CandidatoUsuario", fields: [candidatoId], references: [id], onDelete: Cascade)
  curriculo  UsuariosCurriculos @relation(fields: [curriculoId], references: [id], onDelete: Cascade)
  empresa    Usuarios           @relation("EmpresaUsuario", fields: [empresaUsuarioId], references: [id])

  @@unique([vagaId, candidatoId, curriculoId])
  @@index([vagaId, candidatoId])
}

model EmpresasPlano {
  id                   String               @id @default(uuid())
  usuarioId            String
  planosEmpresariaisId String
  modo                 EmpresasPlanoModo?
  status               EmpresasPlanoStatus  @default(SUSPENSO)
  origin               EmpresasPlanoOrigin  @default(CHECKOUT)
  inicio               DateTime?
  fim                  DateTime?
  criadoEm             DateTime             @default(now())
  atualizadoEm         DateTime             @updatedAt

  // Integração de pagamentos/assinaturas (Mercado Pago)
  modeloPagamento  MODELO_PAGAMENTO?
  metodoPagamento  METODO_PAGAMENTO?
  statusPagamento  STATUS_PAGAMENTO?       @default(PENDENTE)
  mpPreapprovalId  String?                 @unique
  mpSubscriptionId String?                 @unique
  mpPayerId        String?
  mpPaymentId      String?
  proximaCobranca  DateTime?
  graceUntil       DateTime?

  empresa Usuarios            @relation("UsuarioPlanos", fields: [usuarioId], references: [id], onDelete: Cascade)
  plano   PlanosEmpresariais @relation(fields: [planosEmpresariaisId], references: [id])
  vagasDestaque EmpresasVagasDestaque[]

  @@index([usuarioId, status])
  @@index([planosEmpresariaisId])
}

model LogsPagamentosDeAssinaturas {
  id              String   @id @default(uuid())
  usuarioId       String?
  empresasPlanoId String?
  tipo           String
  status         String?
  externalRef    String?
  mpResourceId   String?
  payload        Json?
  mensagem       String?  @db.Text
  criadoEm       DateTime @default(now())

  @@index([usuarioId])
  @@index([empresasPlanoId])
  @@index([tipo])
  @@index([criadoEm])
}

model UsuariosEmBanimentos {
  id            String              @id @default(uuid())
  usuarioId     String
  aplicadoPorId String
  tipo          TiposDeBanimentos
  motivo        MotivosDeBanimentos
  status        StatusDeBanimentos @default(ATIVO)
  inicio        DateTime           @default(now())
  fim           DateTime?
  observacoes   String?            @db.VarChar(500)
  criadoEm      DateTime           @default(now())
  atualizadoEm  DateTime           @updatedAt

  usuario     Usuarios                   @relation("UsuariosEmBanimentosUsuario", fields: [usuarioId], references: [id], onDelete: Cascade)
  aplicadoPor Usuarios                   @relation("UsuariosEmBanimentosAdmin", fields: [aplicadoPorId], references: [id])
  logs        UsuariosEmBanimentosLogs[]

  @@index([usuarioId])
  @@index([status])
  @@index([fim])
}

model UsuariosEmBanimentosLogs {
  id           String                 @id @default(uuid())
  banimentoId  String
  acao         AcoesDeLogDeBanimento
  descricao    String?                @db.VarChar(500)
  criadoPorId  String
  criadoEm     DateTime               @default(now())

  banimento UsuariosEmBanimentos @relation(fields: [banimentoId], references: [id], onDelete: Cascade)
  criadoPor Usuarios             @relation("UsuariosEmBanimentosLogsAdmin", fields: [criadoPorId], references: [id])

  @@index([banimentoId])
  @@index([criadoPorId])
  @@index([criadoEm])
}

model PlanosEmpresariais {
  id                      String   @id @default(uuid())
  icon                    String
  nome                    String
  descricao               String
  valor                   String
  desconto                Float?
  quantidadeVagas         Int
  vagaEmDestaque          Boolean  @default(false)
  quantidadeVagasDestaque Int?
  criadoEm                DateTime @default(now())
  atualizadoEm            DateTime @updatedAt

  empresas EmpresasPlano[]

  // Integração Mercado Pago - plano recorrente reutilizável
  mpPreapprovalPlanId String? @unique
}

model UsuariosEnderecos {
  id           String   @id @default(uuid())
  usuarioId    String
  logradouro   String?
  numero       String?
  bairro       String?
  cidade       String?
  estado       String?
  cep          String?
  criadoEm     DateTime @default(now())
  atualizadoEm DateTime @updatedAt
  usuario      Usuarios @relation(fields: [usuarioId], references: [id])
}


model LogEmail {
  id           String      @id @default(uuid())
  usuarioId    String?
  email        String
  tipoEmail    TiposDeEmails
  status       StatusEmail
  tentativas   Int         @default(1)
  erro         String?
  messageId    String?
  criadoEm     DateTime    @default(now())
  atualizadoEm DateTime    @updatedAt

  @@index([usuarioId])
  @@index([email])
  @@index([tipoEmail])
  @@index([criadoEm])
}

model LogSMS {
  id           String    @id @default(uuid())
  usuarioId    String?
  telefone     String
  tipoSMS      TipoSMS
  status       StatusSMS
  tentativas   Int       @default(1)
  erro         String?
  messageId    String?
  criadoEm     DateTime  @default(now())
  atualizadoEm DateTime  @updatedAt

  @@index([usuarioId])
  @@index([telefone])
  @@index([tipoSMS])
  @@index([criadoEm])
}

model WebsiteSobre {
  id           String   @id @default(uuid())
  imagemUrl    String
  imagemTitulo String
  titulo       String
  descricao    String
  criadoEm     DateTime @default(now())
  atualizadoEm DateTime @updatedAt
}

model WebsiteConsultoria {
  id           String   @id @default(uuid())
  imagemUrl    String
  imagemTitulo String
  titulo       String
  descricao    String
  buttonUrl    String
  buttonLabel  String
  criadoEm     DateTime @default(now())
  atualizadoEm DateTime @updatedAt
}

model WebsiteRecrutamento {
  id           String   @id @default(uuid())
  imagemUrl    String
  imagemTitulo String
  titulo       String
  descricao    String
  buttonUrl    String
  buttonLabel  String
  criadoEm     DateTime @default(now())
  atualizadoEm DateTime @updatedAt
}

model WebsiteSobreEmpresa {
  id               String   @id @default(uuid())
  titulo           String
  descricao        String
  descricaoVisao   String
  descricaoMissao  String
  descricaoValores String
  videoUrl         String
  criadoEm         DateTime @default(now())
  atualizadoEm     DateTime @updatedAt
}

model WebsiteTeam {
  id           String   @id @default(uuid())
  photoUrl     String
  nome         String
  cargo        String
  criadoEm     DateTime @default(now())
  atualizadoEm DateTime @updatedAt

  ordem WebsiteTeamOrdem?
}

model WebsiteTeamOrdem {
  id            String        @id @default(uuid())
  websiteTeamId String        @unique
  ordem         Int
  status        WebsiteStatus @default(RASCUNHO)
  criadoEm      DateTime      @default(now())

  team WebsiteTeam @relation(fields: [websiteTeamId], references: [id], onDelete: Cascade)

  @@unique([ordem])
  @@index([ordem])
  @@index([status])
}

model WebsiteDepoimento {
  id           String   @id @default(uuid())
  depoimento   String
  nome         String
  cargo        String
  fotoUrl      String
  criadoEm     DateTime @default(now())
  atualizadoEm DateTime @updatedAt

  ordem WebsiteDepoimentoOrdem?
}

model WebsiteDepoimentoOrdem {
  id                  String        @id @default(uuid())
  websiteDepoimentoId String        @unique
  ordem               Int
  status              WebsiteStatus @default(RASCUNHO)
  criadoEm            DateTime      @default(now())

  depoimento WebsiteDepoimento @relation(fields: [websiteDepoimentoId], references: [id], onDelete: Cascade)

  @@unique([ordem])
  @@index([ordem])
}

model WebsiteDiferenciais {
  id           String   @id @default(uuid())
  icone1       String
  titulo1      String
  descricao1   String
  icone2       String
  titulo2      String
  descricao2   String
  icone3       String
  titulo3      String
  descricao3   String
  icone4       String
  titulo4      String
  descricao4   String
  titulo       String
  descricao    String
  botaoUrl     String
  botaoLabel   String
  criadoEm     DateTime @default(now())
  atualizadoEm DateTime @updatedAt
}

model WebsiteSlider {
  id           String   @id @default(uuid())
  sliderName   String
  imagemUrl    String
  link         String?
  criadoEm     DateTime @default(now())
  atualizadoEm DateTime @updatedAt

  ordem WebsiteSliderOrdem?
}

model WebsiteSliderOrdem {
  id              String            @id @default(uuid())
  websiteSliderId String            @unique
  ordem           Int
  orientacao      WebsiteSlidersOrientations
  status          WebsiteStatus     @default(RASCUNHO)
  criadoEm        DateTime          @default(now())

  slider WebsiteSlider @relation(fields: [websiteSliderId], references: [id], onDelete: Cascade)

  @@unique([ordem, orientacao])
  @@index([ordem])
}

model WebsiteBanner {
  id           String   @id @default(uuid())
  imagemUrl    String
  imagemTitulo String
  link         String?
  criadoEm     DateTime @default(now())
  atualizadoEm DateTime @updatedAt

  ordem WebsiteBannerOrdem?
}

model WebsiteBannerOrdem {
  id              String        @id @default(uuid())
  websiteBannerId String        @unique
  ordem           Int
  status          WebsiteStatus @default(RASCUNHO)
  criadoEm        DateTime      @default(now())

  banner WebsiteBanner @relation(fields: [websiteBannerId], references: [id], onDelete: Cascade)

  @@unique([ordem])
  @@index([ordem])
  @@index([status])
}

model WebsiteLogoEnterprise {
  id           String   @id @default(uuid())
  nome         String
  imagemUrl    String
  imagemAlt    String
  website      String?
  criadoEm     DateTime @default(now())
  atualizadoEm DateTime @updatedAt

  ordem WebsiteLogoEnterpriseOrdem?
}

model WebsiteLogoEnterpriseOrdem {
  id                      String        @id @default(uuid())
  websiteLogoEnterpriseId String        @unique
  ordem                   Int
  status                  WebsiteStatus @default(RASCUNHO)
  criadoEm                DateTime      @default(now())

  logo WebsiteLogoEnterprise @relation(fields: [websiteLogoEnterpriseId], references: [id], onDelete: Cascade)

  @@unique([ordem])
  @@index([ordem])
  @@index([status])
}

model WebsiteImagemLogin {
  id           String   @id @default(uuid())
  imagemUrl    String
  imagemTitulo String
  link         String?
  criadoEm     DateTime @default(now())
  atualizadoEm DateTime @updatedAt
}

model WebsiteScript {
  id          String                    @id @default(uuid())
  nome        String?
  descricao   String?
  codigo      String                    @db.Text
  orientacao  WebsiteScriptOrientation
  status      WebsiteStatus             @default(RASCUNHO)
  criadoEm    DateTime                  @default(now())
  atualizadoEm DateTime                 @updatedAt

  @@index([orientacao, status])
}

model WebsitePlaninhas {
  id           String   @id @default(uuid())
  titulo       String
  descricao    String
  icone1       String
  titulo1      String
  descricao1   String
  icone2       String
  titulo2      String
  descricao2   String
  icone3       String
  titulo3      String
  descricao3   String
  criadoEm     DateTime @default(now())
  atualizadoEm DateTime @updatedAt
}

model WebsiteAdvanceAjuda {
  id           String   @id @default(uuid())
  titulo       String
  descricao    String
  imagemUrl    String
  imagemTitulo String
  titulo1      String
  descricao1   String
  titulo2      String
  descricao2   String
  titulo3      String
  descricao3   String
  criadoEm     DateTime @default(now())
  atualizadoEm DateTime @updatedAt
}

model WebsiteRecrutamentoSelecao {
  id           String   @id @default(uuid())
  titulo       String
  descricao    String
  imagemUrl    String
  imagemTitulo String
  titulo1      String
  titulo2      String
  titulo3      String
  titulo4      String
  criadoEm     DateTime @default(now())
  atualizadoEm DateTime @updatedAt
}

model WebsiteSistema {
  id              String   @id @default(uuid())
  titulo          String
  descricao       String
  subtitulo       String
  etapa1Titulo    String
  etapa1Descricao String
  etapa2Titulo    String
  etapa2Descricao String
  etapa3Titulo    String
  etapa3Descricao String
  criadoEm        DateTime @default(now())
  atualizadoEm    DateTime @updatedAt
}

model WebsiteTreinamentoCompany {
  id           String   @id @default(uuid())
  titulo       String
  descricao    String
  imagemUrl    String
  imagemTitulo String
  titulo1      String
  titulo2      String
  titulo3      String
  titulo4      String
  criadoEm     DateTime @default(now())
  atualizadoEm DateTime @updatedAt
}

model WebsiteConexaoForte {
  id            String   @id @default(uuid())
  titulo        String
  descricao     String
  imagemUrl1    String
  imagemTitulo1 String
  imagemUrl2    String
  imagemTitulo2 String
  imagemUrl3    String
  imagemTitulo3 String
  imagemUrl4    String
  imagemTitulo4 String
  criadoEm      DateTime @default(now())
  atualizadoEm  DateTime @updatedAt
}

model WebsiteTreinamentosInCompany {
  id           String   @id @default(uuid())
  titulo       String
  icone1       String
  descricao1   String
  icone2       String
  descricao2   String
  icone3       String
  descricao3   String
  icone4       String
  descricao4   String
  icone5       String
  descricao5   String
  criadoEm     DateTime @default(now())
  atualizadoEm DateTime @updatedAt
}

model WebsiteInformacoes {
  id           String   @id @default(uuid())
  endereco     String?
  cep          String?
  cidade       String?
  estado       String?
  telefone1    String?
  telefone2    String?
  whatsapp     String?
  linkedin     String?
  facebook     String?
  instagram    String?
  youtube      String?
  email        String?
  criadoEm     DateTime @default(now())
  atualizadoEm DateTime @updatedAt

  horarios WebsiteHorarioFuncionamento[]
}

model UsuariosRedesSociais {
  id         String   @id @default(uuid())
  usuarioId  String   @unique
  instagram  String?
  linkedin   String?
  facebook   String?
  youtube    String?
  twitter    String?
  tiktok     String?
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt

  usuario Usuarios @relation(fields: [usuarioId], references: [id], onDelete: Cascade)

  @@index([usuarioId])
}

model WebsiteHorarioFuncionamento {
  id            String             @id @default(uuid())
  diaDaSemana   String
  horarioInicio String
  horarioFim    String
  informacoes   WebsiteInformacoes @relation(fields: [informacoesId], references: [id], onDelete: Cascade)
  informacoesId String
  criadoEm      DateTime           @default(now())
  atualizadoEm  DateTime           @updatedAt
}

model WebsiteHeaderPage {
  id           String                @id @default(uuid())
  subtitulo    String
  titulo       String
  descricao    String
  imagemUrl    String
  buttonLabel  String
  buttonLink   String
  page         WebsiteHeaderPageType @unique
  criadoEm     DateTime              @default(now())
  atualizadoEm DateTime              @updatedAt
}

// =============================================
// ENUMS
// =============================================

enum TiposDeUsuarios {
  PESSOA_FISICA
  PESSOA_JURIDICA
}

enum Roles {
  ADMIN
  MODERADOR
  FINANCEIRO
  PROFESSOR
  EMPRESA
  PEDAGOGICO
  RECRUTADOR
  PSICOLOGO
  ALUNO_CANDIDATO
}

enum Status {
  ATIVO
  INATIVO
  BANIDO
  PENDENTE
  SUSPENSO
}

enum TiposDeEmails {
  BOAS_VINDAS
  RECUPERACAO_SENHA
  VERIFICACAO_EMAIL
  NOTIFICACAO_SISTEMA
}

enum StatusEmail {
  ENVIADO
  FALHA
  PENDENTE
}

enum TipoSMS {
  VERIFICACAO
  NOTIFICACAO
  MARKETING
}

enum StatusSMS {
  ENVIADO
  FALHA
  PENDENTE
}

// Métodos de pagamento aceitos para planos
enum WebsiteSlidersOrientations {
  DESKTOP
  TABLET_MOBILE
}

enum WebsiteStatus {
  PUBLICADO
  RASCUNHO
}

enum WebsiteHeaderPageType {
  SOBRE
  RECRUTAMENTO
  VAGAS
  TREINAMENTO
  CONTATO
  BLOG
  CURSOS
  POLITICA_PRIVACIDADE
  OUVIDORIA
}

enum WebsiteScriptOrientation {
  HEADER
  BODY
  FOOTER
}

// ===============================
// ENUMS DE PAGAMENTOS
// ===============================

enum STATUS_PAGAMENTO {
  PENDENTE
  EM_PROCESSAMENTO
  APROVADO
  CONCLUIDO
  RECUSADO
  ESTORNADO
  CANCELADO
}

enum MODELO_PAGAMENTO {
  ASSINATURA
  PAGAMENTO_UNICO
  PAGAMENTO_PARCELADO
}

enum METODO_PAGAMENTO {
  CARTAO_CREDITO
  CARTAO_DEBITO
  PIX
  BOLETO
  TRANSFERENCIA
  DINHEIRO
}

// ===============================
// ENUMS DE VAGAS/EMPRESAS
// ===============================

enum RegimesDeTrabalhos {
  CLT
  TEMPORARIO
  ESTAGIO
  PJ
  HOME_OFFICE
  JOVEM_APRENDIZ
}

enum ModalidadesDeVagas {
  PRESENCIAL
  REMOTO
  HIBRIDO
}

enum Jornadas {
  INTEGRAL
  MEIO_PERIODO
  FLEXIVEL
  TURNOS
  NOTURNO
}

enum StatusDeVagas {
  RASCUNHO
  EM_ANALISE
  PUBLICADO
  EXPIRADO
  DESPUBLICADA
  PAUSADA
  ENCERRADA
}

enum StatusProcesso {
  RECEBIDA
  EM_ANALISE
  EM_TRIAGEM
  ENTREVISTA
  DESAFIO
  DOCUMENTACAO
  CONTRATADO
  RECUSADO
  DESISTIU
  NAO_COMPARECEU
  ARQUIVADO
  CANCELADO
}

enum OrigemVagas {
  SITE
  DASHBOARD
  OUTROS
}

enum Senioridade {
  ABERTO
  ESTAGIARIO
  JUNIOR
  PLENO
  SENIOR
  ESPECIALISTA
  LIDER
}

enum CursosTurnos {
  MANHA
  TARDE
  NOITE
  INTEGRAL
}

enum CursoStatus {
  RASCUNHO
  PUBLICADO
  INSCRICOES_ABERTAS
  INSCRICOES_ENCERRADAS
  EM_ANDAMENTO
  CONCLUIDO
  SUSPENSO
  CANCELADO
}

enum CursosMetodos {
  ONLINE
  PRESENCIAL
  LIVE
  SEMIPRESENCIAL
}

enum CursosCertificados {
  SEM_CERTIFICADO
  PARTICIPACAO
  CONCLUSAO
  APROVEITAMENTO
  COMPETENCIA
}

enum CursosCertificadosTipos {
  DIGITAL
  IMPRESSO
  DIGITAL_E_IMPRESSO
  VERIFICAVEL
}

enum CursosCertificadosLogAcao {
  EMISSAO
  VISUALIZACAO
}

model CursosCertificadosEmitidos {
  id             String                    @id @default(uuid())
  matriculaId    String
  codigo         String                    @unique @db.VarChar(20)
  tipo           CursosCertificados
  formato        CursosCertificadosTipos
  cargaHoraria   Int
  assinaturaUrl  String?                   @db.VarChar(2048)
  alunoNome      String                    @db.VarChar(255)
  alunoCpf       String?                   @db.VarChar(14)
  cursoNome      String                    @db.VarChar(255)
  turmaNome      String                    @db.VarChar(255)
  emitidoPorId   String?
  emitidoEm      DateTime                  @default(now())
  observacoes    String?                   @db.VarChar(500)

  matricula CursosTurmasMatriculas @relation(fields: [matriculaId], references: [id], onDelete: Cascade)
  emitidoPor Usuarios?             @relation("CursosCertificadosEmitidosEmitidoPor", fields: [emitidoPorId], references: [id], onDelete: SetNull)
  logs       CursosCertificadosLogs[]

  @@index([matriculaId])
  @@index([emitidoPorId])
  @@index([emitidoEm])
}

model CursosCertificadosLogs {
  id            String                     @id @default(uuid())
  certificadoId String
  acao          CursosCertificadosLogAcao
  formato       CursosCertificadosTipos
  detalhes      String?                    @db.VarChar(500)
  criadoEm      DateTime                   @default(now())

  certificado CursosCertificadosEmitidos @relation(fields: [certificadoId], references: [id], onDelete: Cascade)

  @@index([certificadoId])
  @@index([acao])
  @@index([criadoEm])
}

model CursosEstagios {
  id                     String               @id @default(uuid())
  cursoId                Int
  turmaId                String
  matriculaId            String
  alunoId                String
  nome                   String               @db.VarChar(255)
  descricao              String?              @db.Text
  obrigatorio            Boolean              @default(false)
  status                 CursosEstagioStatus  @default(PENDENTE)
  dataInicio             DateTime
  dataFim                DateTime
  cargaHoraria           Int?
  empresaPrincipal       String?              @db.VarChar(255)
  observacoes            String?              @db.Text
  criadoPorId            String?
  atualizadoPorId        String?
  confirmadoEm           DateTime?
  concluidoEm            DateTime?
  reprovadoEm            DateTime?
  reprovadoMotivo        String?              @db.Text
  ultimoAvisoEncerramento DateTime?
  criadoEm               DateTime             @default(now())
  atualizadoEm           DateTime             @updatedAt

  curso        Cursos                    @relation(fields: [cursoId], references: [id], onDelete: Cascade)
  turma        CursosTurmas              @relation(fields: [turmaId], references: [id], onDelete: Cascade)
  matricula    CursosTurmasMatriculas    @relation(fields: [matriculaId], references: [id], onDelete: Cascade)
  aluno        Usuarios                  @relation("CursosEstagiosAluno", fields: [alunoId], references: [id], onDelete: Cascade)
  criadoPor    Usuarios?                 @relation("CursosEstagiosCriadoPor", fields: [criadoPorId], references: [id], onDelete: SetNull)
  atualizadoPor Usuarios?                @relation("CursosEstagiosAtualizadoPor", fields: [atualizadoPorId], references: [id], onDelete: SetNull)
  locais       CursosEstagiosLocais[]
  confirmacao  CursosEstagiosConfirmacoes?
  notificacoes CursosEstagiosNotificacoes[]

  @@index([cursoId])
  @@index([turmaId])
  @@index([matriculaId])
  @@index([alunoId])
  @@index([status])
  @@index([dataFim])
}

model CursosEstagiosLocais {
  id                String                    @id @default(uuid())
  estagioId         String
  titulo            String?                   @db.VarChar(120)
  empresaNome       String                    @db.VarChar(255)
  empresaDocumento  String?                   @db.VarChar(20)
  contatoNome       String?                   @db.VarChar(120)
  contatoEmail      String?                   @db.VarChar(255)
  contatoTelefone   String?                   @db.VarChar(30)
  dataInicio        DateTime?
  dataFim           DateTime?
  horarioInicio     String?                   @db.VarChar(5)
  horarioFim        String?                   @db.VarChar(5)
  diasSemana        CursosEstagioDiaSemana[]
  cargaHorariaSemanal Int?
  cep               String?                   @db.VarChar(12)
  logradouro        String?                   @db.VarChar(255)
  numero            String?                   @db.VarChar(20)
  bairro            String?                   @db.VarChar(120)
  cidade            String?                   @db.VarChar(120)
  estado            String?                   @db.VarChar(2)
  complemento       String?                   @db.VarChar(120)
  pontoReferencia   String?                   @db.VarChar(255)
  observacoes       String?                   @db.VarChar(500)
  criadoEm          DateTime                  @default(now())
  atualizadoEm      DateTime                  @updatedAt

  estagio CursosEstagios @relation(fields: [estagioId], references: [id], onDelete: Cascade)

  @@index([estagioId])
}

model CursosEstagiosConfirmacoes {
  id                  String   @id @default(uuid())
  estagioId           String   @unique
  token               String   @unique @db.VarChar(64)
  protocolo           String?  @unique @db.VarChar(40)
  confirmadoEm        DateTime?
  ip                  String?  @db.VarChar(45)
  userAgent           String?  @db.VarChar(500)
  deviceTipo          String?  @db.VarChar(50)
  deviceDescricao     String?  @db.VarChar(120)
  deviceId            String?  @db.VarChar(120)
  sistemaOperacional  String?  @db.VarChar(120)
  navegador           String?  @db.VarChar(120)
  localizacao         String?  @db.VarChar(255)
  criadoEm            DateTime @default(now())
  atualizadoEm        DateTime @updatedAt

  estagio CursosEstagios @relation(fields: [estagioId], references: [id], onDelete: Cascade)
}

model CursosEstagiosNotificacoes {
  id          String                         @id @default(uuid())
  estagioId   String
  tipo        CursosEstagioNotificacaoTipo
  canal       String?                        @db.VarChar(50)
  enviadoPara String                         @db.VarChar(255)
  enviadoEm   DateTime                       @default(now())
  detalhes    String?                        @db.VarChar(500)

  estagio CursosEstagios @relation(fields: [estagioId], references: [id], onDelete: Cascade)

  @@index([estagioId])
  @@index([tipo])
}

enum CursosEstagioStatus {
  PENDENTE
  EM_ANDAMENTO
  CONCLUIDO
  REPROVADO
  CANCELADO
}

enum CursosEstagioDiaSemana {
  DOMINGO
  SEGUNDA
  TERCA
  QUARTA
  QUINTA
  SEXTA
  SABADO
}

enum CursosEstagioNotificacaoTipo {
  ASSINATURA_PENDENTE
  INICIO_PROXIMO
  ENCERRAMENTO_PROXIMO
  CONCLUSAO_SOLICITADA
}

enum EmpresasPlanoStatus {
  ATIVO
  SUSPENSO
  EXPIRADO
  CANCELADO
}

enum EmpresasPlanoModo {
  TESTE
  PARCEIRO
}

enum EmpresasPlanoOrigin {
  CHECKOUT
  ADMIN
  IMPORT
}

enum TiposDeBanimentos {
  TEMPORARIO
  PERMANENTE
  RESTRICAO_DE_RECURSO
}

enum StatusDeBanimentos {
  ATIVO
  EM_REVISAO
  REVOGADO
  EXPIRADO
}

enum MotivosDeBanimentos {
  SPAM
  VIOLACAO_POLITICAS
  FRAUDE
  ABUSO_DE_RECURSOS
  OUTROS
}

enum AcoesDeLogDeBanimento {
  CRIACAO
  ATUALIZACAO
  REVOGACAO
  REAVALIACAO
}