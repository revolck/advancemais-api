# =============================================
# CONFIGURAÇÕES BÁSICAS
# =============================================
NODE_ENV=development
PORT=3000

# =============================================
# BANCO DE DADOS (OBRIGATÓRIO)
# =============================================
# URL para conexões da aplicação (com pooler do Supabase)
DATABASE_URL="postgresql://postgres.xxx:password@aws-0-sa-east-1.pooler.supabase.com:6543/postgres?pgbouncer=true&connection_limit=1"

# URL direta para migrações Prisma (sem pooler)
DIRECT_URL="postgresql://postgres.xxx:password@aws-0-sa-east-1.pooler.supabase.com:5432/postgres"

# =============================================
# SUPABASE (OBRIGATÓRIO)
# =============================================
SUPABASE_URL=https://xxx.supabase.co
SUPABASE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# JWT para Supabase JWKS (opcional - gerado automaticamente se não fornecido)
# SUPABASE_JWKS_URI=https://xxx.supabase.co/auth/v1/.well-known/jwks.json

# =============================================
# JWT (OBRIGATÓRIO)
# =============================================
# Chave secreta para JWT (mínimo 32 caracteres)
JWT_SECRET=sua_chave_jwt_super_secreta_com_pelo_menos_32_caracteres_aqui

# Chave secreta para refresh token (mínimo 32 caracteres)
JWT_REFRESH_SECRET=sua_chave_refresh_jwt_ainda_mais_secreta_com_64_caracteres_aqui

# Configurações de expiração
JWT_EXPIRATION=1h
JWT_REFRESH_EXPIRATION=30d

# =============================================
# BREVO - EMAIL (OPCIONAL PARA DESENVOLVIMENTO)
# =============================================
# API Key do Brevo (deixe vazio para modo simulado)
BREVO_API_KEY=xkeysib-851JKC36h92VRfbk-SuaChaveRealAqui

# Email remetente
BREVO_FROM_EMAIL=noreply@advancemais.com
BREVO_FROM_NAME=AdvanceMais

# Configurações avançadas do Brevo (opcionais)
BREVO_TIMEOUT=5000
BREVO_MAX_RETRIES=3
BREVO_RETRY_DELAY=1000
BREVO_DAILY_EMAIL_LIMIT=10000
BREVO_DAILY_SMS_LIMIT=1000
BREVO_SMS_SENDER=AdvanceMais
BREVO_SMS_UNICODE=false

# Configurações SMTP (backup - opcionais)
BREVO_SMTP_HOST=smtp-relay.brevo.com
BREVO_SMTP_PORT=587
BREVO_SMTP_USER=seu_email@dominio.com
BREVO_SMTP_PASSWORD=sua_senha_smtp

# Configurações de template (opcionais)
BREVO_TEMPLATE_CACHE=true
BREVO_PRELOAD_TEMPLATES=true
BREVO_CUSTOM_TEMPLATE_DIR=

# Configurações de verificação de email
EMAIL_VERIFICATION_REQUIRED=true
EMAIL_VERIFICATION_EXPIRATION_HOURS=72
EMAIL_VERIFICATION_MAX_RESEND=3
EMAIL_VERIFICATION_COOLDOWN_MINUTES=5

# Configurações de recuperação de senha
# Expiração em horas
BREVO_PASSWORD_RECOVERY_EXPIRATION_HOURS=72
BREVO_PASSWORD_RECOVERY_MAX_ATTEMPTS=3
BREVO_PASSWORD_RECOVERY_COOLDOWN_MINUTES=15

# =============================================
# MERCADOPAGO (OPCIONAL)
# =============================================
# Tokens de acesso
MERCADOPAGO_ACCESS_TOKEN=TEST-123456789-sandbox-token-aqui
MERCADOPAGO_PUBLIC_KEY=TEST-123456789-public-key-aqui

# Ambiente (sandbox para desenvolvimento, production para produção)
MERCADOPAGO_ENVIRONMENT=sandbox

# Configurações de webhook
MERCADOPAGO_WEBHOOK_SECRET=sua_chave_secreta_webhook
MERCADOPAGO_NOTIFICATION_URL=https://sua-api.com/api/v1/mercadopago/webhooks

# Configurações de timeout e retry
MERCADOPAGO_TIMEOUT=5000
MERCADOPAGO_RETRY_ATTEMPTS=3

# IDs opcionais para integração avançada
MERCADOPAGO_INTEGRATOR_ID=
MERCADOPAGO_PLATFORM_ID=
MERCADOPAGO_CORPORATION_ID=

# Configurações de localização
MERCADOPAGO_LOCALE=pt-BR
MERCADOPAGO_DEFAULT_PROCESSING_MODE=automatic
MERCADOPAGO_DEFAULT_CURRENCY=BRL

# Configurações de reembolso
MERCADOPAGO_ALLOW_PARTIAL_REFUNDS=true
MERCADOPAGO_MAX_REFUND_DAYS=180
MERCADOPAGO_AUTO_REFUND_ON_CANCEL=false

# Configurações de assinatura
MERCADOPAGO_MAX_FREQUENCY_DAYS=365
MERCADOPAGO_ALLOW_FREE_TRIALS=true
MERCADOPAGO_DEFAULT_FREQUENCY_TYPE=months

# =============================================
# FRONTEND E CORS
# =============================================
# URL do frontend (importante para links em emails)
FRONTEND_URL=http://localhost:3000

# CORS Origin (* para desenvolvimento, domínio específico para produção)
CORS_ORIGIN=*

# =============================================
# SEGURANÇA
# =============================================
# Rounds do bcrypt para hash de senhas (12 é recomendado)
BCRYPT_ROUNDS=12

# Secret para sessões
SESSION_SECRET=default-session-secret-change-in-production

# Tempo de vida do cookie (em ms)
COOKIE_MAX_AGE=86400000

# =============================================
# RATE LIMITING
# =============================================
# Janela de tempo para rate limiting (em ms) - 15 minutos
RATE_LIMIT_WINDOW_MS=900000

# Máximo de requests por janela
RATE_LIMIT_MAX_REQUESTS=100

# =============================================
# UPLOAD DE ARQUIVOS
# =============================================
# Tamanho máximo de arquivo (em bytes) - 10MB
MAX_FILE_SIZE=10485760

# Tipos MIME permitidos
ALLOWED_MIME_TYPES=image/jpeg,image/png,image/gif,application/pdf

# =============================================
# LOGS
# =============================================
# Nível de log (debug, info, warn, error)
LOG_LEVEL=debug

# Habilitar log no console
ENABLE_CONSOLE_LOG=true

# Habilitar log em arquivo
ENABLE_FILE_LOG=false

# =============================================
# INSTRUÇÕES DE CONFIGURAÇÃO
# =============================================

# DESENVOLVIMENTO LOCAL:
# 1. Configure DATABASE_URL e DIRECT_URL com suas credenciais do Supabase
# 2. Configure SUPABASE_URL e SUPABASE_KEY
# 3. Configure JWT_SECRET e JWT_REFRESH_SECRET (mínimo 32 caracteres cada)
# 4. BREVO_API_KEY pode ficar vazio (modo simulado)
# 5. MERCADOPAGO pode ficar com valores TEST para sandbox

# PRODUÇÃO:
# 1. Mude NODE_ENV=production
# 2. Configure CORS_ORIGIN com seu domínio
# 3. Configure BREVO_API_KEY real
# 4. Configure MERCADOPAGO com tokens de produção
# 5. Configure FRONTEND_URL com seu domínio real
# 6. Use chaves JWT diferentes e seguras

# VALIDAÇÃO:
# O sistema validará automaticamente as configurações obrigatórias
# Em desenvolvimento: DATABASE_URL, DIRECT_URL, JWT_SECRET, JWT_REFRESH_SECRET
# Em produção: + SUPABASE_URL, SUPABASE_KEY, BREVO_API_KEY, MERCADOPAGO_*, FRONTEND_URL

# TROUBLESHOOTING:
# - Se der erro de JWT: verifique se as chaves têm pelo menos 32 caracteres
# - Se der erro de banco: verifique DATABASE_URL e DIRECT_URL
# - Se emails não enviarem: verifique BREVO_API_KEY ou deixe vazio para modo simulado
# - Se MercadoPago não funcionar: verifique os tokens e environment