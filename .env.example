# =============================================
# CONFIGURAÇÕES DO AMBIENTE - AdvanceMais API
# =============================================
# Copie este arquivo para .env e preencha com seus valores reais
# Versão: 2.1.0 - Atualizado com novas configurações do Brevo

# =============================================
# SUPABASE - Autenticação e Banco de Dados
# =============================================
SUPABASE_URL=https://mldktbtctxeiufhsspsa.supabase.co
SUPABASE_KEY=sua-chave-api-do-supabase
SUPABASE_JWKS_URI="https://your-project.supabase.co/auth/v1/.well-known/jwks.json"

# =============================================
# BANCO DE DADOS - PostgreSQL via Prisma
# =============================================
# Usando pooler (recomendado para aplicações stateless)
DATABASE_URL="postgresql://postgres.mldktbtctxeiufhsspsa:0tDJtteCWBVIAYjG@aws-0-sa-east-1.pooler.supabase.com:6543/postgres?pgbouncer=true"
# URL direta para migrações Prisma
DIRECT_URL="postgresql://postgres.mldktbtctxeiufhsspsa:0tDJtteCWBVIAYjG@aws-0-sa-east-1.pooler.supabase.com:5432/postgres"

# =============================================
# JWT - Tokens de Autenticação
# =============================================
JWT_SECRET="sua-chave-secreta-super-segura-com-pelo-menos-32-caracteres"
JWT_REFRESH_SECRET="sua-chave-refresh-secreta-super-segura-com-pelo-menos-32-caracteres"
JWT_EXPIRATION="1h"
JWT_REFRESH_EXPIRATION="30d"

# =============================================
# BREVO (ex-Sendinblue) - Email e SMS
# =============================================
# API Key principal (OBRIGATÓRIO)
BREVO_API_KEY=851JKC36h92VRfbk

# Configurações de remetente de email
BREVO_FROM_EMAIL=noreply@advancemais.com
BREVO_FROM_NAME=AdvanceMais

# Configurações SMTP (opcional - para backup)
BREVO_SMTP_HOST=smtp-relay.brevo.com
BREVO_SMTP_PORT=587
BREVO_SMTP_USER=93713f002@smtp-brevo.com
BREVO_SMTP_PASSWORD=8G2CrnFRt4EpNUbs

# Configurações avançadas do Brevo (opcional)
BREVO_MAX_RETRIES=3
BREVO_RETRY_DELAY=1000
BREVO_TIMEOUT=30000
BREVO_DAILY_EMAIL_LIMIT=10000
BREVO_DAILY_SMS_LIMIT=1000
BREVO_SMS_SENDER=AdvanceMais
BREVO_SMS_UNICODE=false
BREVO_TEMPLATE_CACHE=true
BREVO_PRELOAD_TEMPLATES=true

# Configurações de recuperação de senha
PASSWORD_RECOVERY_EXPIRATION_MINUTES=30
PASSWORD_RECOVERY_MAX_ATTEMPTS=3
PASSWORD_RECOVERY_COOLDOWN_MINUTES=15

# =============================================
# FRONTEND - URLs para links de email
# =============================================
FRONTEND_URL=http://localhost:3000

# =============================================
# SERVIDOR - Configurações Express
# =============================================
PORT=3000
NODE_ENV=development
CORS_ORIGIN=*

# =============================================
# RATE LIMITING - Controle de Taxa
# =============================================
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# =============================================
# UPLOAD - Configurações de Arquivo
# =============================================
MAX_FILE_SIZE=10485760
ALLOWED_MIME_TYPES=image/jpeg,image/png,image/gif,application/pdf

# =============================================
# LOGGING - Sistema de Logs
# =============================================
LOG_LEVEL=debug
ENABLE_CONSOLE_LOG=true
ENABLE_FILE_LOG=false

# =============================================
# SEGURANÇA - Configurações de Segurança
# =============================================
BCRYPT_ROUNDS=12
SESSION_SECRET=sua-chave-de-sessao-super-segura
COOKIE_MAX_AGE=86400000

# =============================================
# MERCADOPAGO - Pagamentos
# =============================================
MERCADOPAGO_ACCESS_TOKEN=TEST-1234567890-123456-abcdef123456789012345678901234-12345678
MERCADOPAGO_PUBLIC_KEY=TEST-abcdef12-3456-7890-abcd-ef1234567890
MERCADOPAGO_ENVIRONMENT=sandbox
MERCADOPAGO_WEBHOOK_SECRET=sua-chave-secreta-para-webhooks
MERCADOPAGO_TIMEOUT=5000
MERCADOPAGO_RETRY_ATTEMPTS=3
MERCADOPAGO_NOTIFICATION_URL=https://sua-app.com/api/v1/mercadopago/webhooks
MERCADOPAGO_LOCALE=pt-BR
MERCADOPAGO_DEFAULT_PROCESSING_MODE=automatic
MERCADOPAGO_DEFAULT_CURRENCY=BRL

# MercadoPago - Configurações avançadas (opcionais)
MERCADOPAGO_INTEGRATOR_ID=
MERCADOPAGO_PLATFORM_ID=
MERCADOPAGO_CORPORATION_ID=

# MercadoPago - Configurações de reembolso
MERCADOPAGO_ALLOW_PARTIAL_REFUNDS=true
MERCADOPAGO_MAX_REFUND_DAYS=180
MERCADOPAGO_AUTO_REFUND_ON_CANCEL=false

# MercadoPago - Configurações de assinatura
MERCADOPAGO_MAX_FREQUENCY_DAYS=365
MERCADOPAGO_ALLOW_FREE_TRIALS=true
MERCADOPAGO_DEFAULT_FREQUENCY_TYPE=months

# =============================================
# NOTAS IMPORTANTES
# =============================================

# BREVO - Configuração SMTP Manual (para referência)
# Se você quiser configurar SMTP manualmente no Postfix:
# smtp_sasl_auth_enable = yes
# smtp_sasl_password_maps = static:93713f002@smtp-brevo.com:8G2CrnFRt4EpNUbs
# smtp_sasl_security_options = noanonymous
# smtp_tls_security_level = may
# header_size_limit = 4096000
# relayhost = smtp-relay.brevo.com:587

# SEGURANÇA EM PRODUÇÃO:
# - Altere TODAS as chaves secretas para valores únicos e seguros
# - Use chaves JWT com pelo menos 32 caracteres
# - Configure CORS_ORIGIN para seu domínio específico
# - Use NODE_ENV=production
# - Configure SSL/HTTPS
# - Use variáveis de ambiente seguras (não hardcode valores)

# BREVO - Limites do Plano:
# - Verifique seus limites diários de email e SMS no painel Brevo
# - Ajuste BREVO_DAILY_EMAIL_LIMIT e BREVO_DAILY_SMS_LIMIT conforme seu plano
# - API Key: 851JKC36h92VRfbk (use esta chave fornecida)

# MERCADOPAGO - Ambiente:
# - Em desenvolvimento: use chaves TEST e MERCADOPAGO_ENVIRONMENT=sandbox
# - Em produção: use chaves de produção e MERCADOPAGO_ENVIRONMENT=production
# - Configure webhooks no painel do MercadoPago apontando para sua API

# BANCO DE DADOS:
# - DATABASE_URL: para conexões da aplicação (com pooler)
# - DIRECT_URL: para migrações Prisma (conexão direta)
# - Mantenha ambas configuradas para funcionamento correto

# FRONTEND:
# - FRONTEND_URL deve apontar para seu frontend React/Next.js
# - É usado para gerar links corretos em emails
# - Em produção: https://seu-dominio.com
# - Em desenvolvimento: http://localhost:3000